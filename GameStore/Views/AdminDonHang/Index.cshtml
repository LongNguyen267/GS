@model List<GameStore.Models.Order>

@{
    ViewData["Title"] = "Quản lý đơn hàng";
    Layout = "~/Views/Shared/_EmployeeLayout.cshtml";
}

<div class="d-flex align-items-center justify-content-between mb-4">
    <h1 class="h3 mb-0 text-gray-800 font-weight-bold">Quản Lý Đơn Hàng</h1>
</div>

<div class="card shadow mb-4">
    <div class="card-header py-3">
        <h6 class="m-0 font-weight-bold text-primary">Danh sách đơn đặt hàng</h6>
    </div>
    <div class="card-body">
        <div class="table-responsive">
            <table class="table table-hover table-bordered" width="100%">
                <thead class="bg-light text-dark">
                    <tr>
                        <th>Mã Đơn</th>
                        <th>Khách Hàng</th>
                        <th>Ngày Đặt</th>
                        <th>Tổng Tiền</th>
                        <th>Trạng Thái</th>
                        <th class="text-center">Thao Tác</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var order in Model)
                    {
                        <tr>
                            <td class="font-weight-bold">#@order.Id</td>
                            <td>@(order.User?.FullName ?? "Khách vãng lai")</td>
                            <td>@order.OrderDate?.ToString("dd/MM/yyyy")</td>
                            <td class="text-danger font-weight-bold">@order.TotalAmount.ToString("C0", new System.Globalization.CultureInfo("vi-VN"))</td>
                            <td>
                                @{
                                    var statusClass = order.Status switch
                                    {
                                        "Pending" => "badge bg-warning text-dark",
                                        "Processing" => "badge bg-info text-white",
                                        "Shipped" => "badge bg-primary text-white",
                                        "Delivered" => "badge bg-success text-white",
                                        "Cancelled" => "badge bg-danger text-white",
                                        _ => "badge bg-secondary text-white"
                                    };
                                    var statusText = order.Status switch
                                    {
                                        "Pending" => "Chờ xử lý",
                                        "Processing" => "Đang xử lý",
                                        "Shipped" => "Đang giao",
                                        "Delivered" => "Đã giao",
                                        "Cancelled" => "Đã hủy",
                                        _ => order.Status
                                    };
                                }
                                <span class="@statusClass">@statusText</span>
                            </td>
                            <td class="text-center">
                                <a asp-action="Details" asp-route-id="@order.Id" class="btn btn-sm btn-info shadow-sm">
                                    <i class="fas fa-eye"></i> Xem
                                </a>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>